# 1. Calcular una distancia XX entre dos conjuntos
# 2. Tarea para calcular distancias entre provincias todas vs todas
# 3. Tarea para calcular distancias entre departamentos todos vs todos

tasks:
  # geografical distance task:
  #- source: tasks.distances.get_dapartamental_distances_in_meters
  #  name: get_dapartamental_distances_in_meters
  #  params:
  #    departments_shape_file: '{{DEPARTMENTS_SHAPE_PATH}}'
  #  product: _products/distance_matrices/dapartamental_in_meters.parquet

  # fisher and karlin-mcgregor
  # |
  # - departments:
  #   |
  #   - 2000:
  #- source: tasks.migration_indicators.get_karlin_mcgregor_departmental_2001
  #  name: get-karlin-mcgregor-departamental-2001
  #  product: _products/migration-indicators/karlin-mcgregor-departamental-2001.parquet
  #- source: tasks.migration_indicators.get_wright_m_departaments_2001
  #  name: get-wright-m-departaments-2001
  #  product: _products/migration-indicators/wright-m-departaments-2001.parquet
  #   |
  #   - 2015:

  #- source: tasks.migration_indicators.get_wright_m_departaments_2015
  #  name: get-wright-m-departaments-2015
  #  product: _products/migration-indicators/wright-m-departaments-2015.parquet

  #   |
  #   - 2021:
  #- source: tasks.migration_indicators.get_karlin_mcgregor_departmental_2021
  #  name: get-karlin-mcgregor-departamental-2021
  #  product: _products/migration-indicators/karlin-mcgregor-departamental-2021.parquet

  # - source: tasks.migration_indicators.get_wright_m_departaments_2021
  #   name: get-wright-m-departaments-2021
  #   product: _products/migration-indicators/wright-m-departaments-2021.parquet

  # Combine por cada año
  - source: tasks.combine.combine_departamental_datasets
    name: combine-departamental-datasets
    product:
      data_2001: _products/combine/departamental-2001.parquet
      data_2015: _products/combine/departamental-2015.parquet
      data_2021: _products/combine/departamental-2021.parquet

  # |
  # - circuits:
  #   |
  #   - 2021:
  # TODO: Descomentar (comente porque le cambié la carpeta de destino)
  # - source: tasks.migration_indicators.get_karlin_mcgregor_circuito_2021
  #   name: get-karlin-mcgregor-circuito-2021
  #   product: _products/migration-indicators/karlin-mcgregor-circuitos-2021.parquet

  # vis
  - source: tasks.vis.choroplets.plot_choroplet_compartive_map
    name: plot-choroplet-compartive-map
    params:
      departmentShapePath: "{{DEPARTMENTS_SHAPE_PATH}}"
    product: _products/vis/choroplet/karlin-mcgregor-departamental-2001-2021.png

  - source: tasks.vis.choroplets.plot_choroplet_compartive_map_wright_m
    name: plot-choroplet-compartive-map-wright-m
    params:
      departmentShapePath: "{{DEPARTMENTS_SHAPE_PATH}}"
    product: _products/vis/choroplet/wright-m-departamental-2001-2021.png

  - source: tasks.vis.maps.plot_karlin_mcgregor_2015
    name: plot-karlin-mcgregor-2015
    params:
      shape_path: "{{DEPARTMENTS_SHAPE_PATH}}"
    product:
      map-v: _products/vis/map-karlin-mcgregor-departamental.png
      map-a: _products/vis/map-fishers-alpha-departamental.png
      scatterplot-a-and-v: _products/vis/scatterplot-karlin-mcgregor-and-fishers-alpha-departamental.png

  - source: tasks.vis.choroplets.plot_choroplet_comparative_maps
    name: plot-choroplet-comparative-maps-[[regionName]]-[[workColumn]]
    product: _products/vis/choroplet/comparative-choropleth-[[regionName]]-[[workColumn]].png
    params:
      departmentShapePath: "{{DEPARTMENTS_MINIMAL_SHAPE_PATH}}"
    grid:
      regionName: ["Patagonia", "Argentina", "NOA", "NEA", "Centro", "Cuyo"]
      workColumn: ["m_100", "fst", "a", "b"]

  - source: tasks.vis.moran.plot_moran_clustermap_2001_2021
    name: plot-moran-clustermaps-[[regionName]]-[[analysisColumn]]
    product: _products/vis/moran/clustermap-[[regionName]]-[[analysisColumn]].png
    params:
      departmentShapePath: "{{DEPARTMENTS_MINIMAL_SHAPE_PATH}}"
    grid:
      regionName: ["Argentina", "NOA", "NEA", "Centro", "Cuyo", "Patagonia"]
      analysisColumn: ["m", "v", "a"]

  # Report:
  - source: tasks.reports.create_report
    name: create-report
    product: _output/report.pdf

  # Isonymics
  - source: tasks.isonymic_indicators.get_isonymy_departments_2015
    name: get-isonymy-departments-2015
    product: _products/isonymy/isonymy-departments-2015.parquet

  #- source: tasks.isonymic_indicators.get_isonymy_departments_2021
  #  name: get-isonymy-departments-2021
  #  product: _products/isonymy/isonymy-departments-2021.parquet

  # surname distance task:
  - source: tasks.distances.get_dapartamental_distances
    name: get-dapartamental-distances
    product:
      isonymic: _products/distance_matrices/dapartamental_isonymic.parquet
      lasker: _products/distance_matrices/dapartamental_lasker.parquet
      nei: _products/distance_matrices/dapartamental_nei.parquet
      euclidean: _products/distance_matrices/dapartamental_euclidean.parquet

  # Divisional tasks:
  # National:
  - source: tasks.national.national_isonymy.get_national_isonymy_2015
    name: get-national-isonymy-2015
    product: _products/national/isonymy-2015.parquet

  - source: tasks.regional.regional_isonymy.get_regional_isonymy_2015
    name: get-regional-isonymy-2015
    product: _products/regional/isonymy-2015.parquet

  - source: tasks.provincial.provincial_isonymy.get_provincial_isonymy_2015
    name: get-provincial-isonymy-2015
    product: _products/provincial/isonymy-2015.parquet

  ## Departmental tasks:
  - source: tasks.departmental.isonymy.get_departmental_isonymy_2015
    name: get-departmental-isonymy-2015
    product: _products/departmental/isonymy-2015.parquet

  - source: tasks.departmental.isonymy.get_departmental_isonymy_2021
    name: get-departmental-isonymy-2021
    product: _products/departmental/isonymy-2021.parquet

  - source: tasks.departmental.karlin_mcgregor.get_karlin_mcgregor_departmental_2001
    name: get-karlin-mcgregor-departmental-2001
    product: _products/departmental/karlin-mcgregor-2001.parquet

  - source: tasks.departmental.karlin_mcgregor.get_departmental_karlin_mcgregor_2015
    name: get-karlin-mcgregor-departmental-2015
    product: _products/departmental/karlin-mcgregor-2015.parquet

  - source: tasks.departmental.karlin_mcgregor.get_departmental_karlin_mcgregor_2021
    name: get-departmental-karlin-mcgregor-2021
    product: _products/departmental/karlin-mcgregor-2021.parquet

  - source: tasks.departmental.wright.get_wright_m_departmental_2001
    name: get-wright-m-departmental-2001
    product: _products/departmental/wright-2001.parquet

  - source: tasks.departmental.wright.get_departmental_wright_m_2015
    name: get-departmental-wright-m-2015
    product: _products/departmental/wright-2015.parquet

  - source: tasks.departmental.wright.get_departmental_wright_m_2021
    name: get-departmental-wright-m-2021
    product: _products/departmental/wright-2021.parquet

  - source: tasks.departmental.merge.get_isonymy_and_migration_indicators_2021
    name: get-merged-indicators-2021
    product: _products/departmental/get-merged-indicators-2021.parquet
